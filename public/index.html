<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Soir√©e Arido ‚Äì Organis√© par AFARIS</title>
  <link rel="stylesheet" href="/styles.css" />
  <link rel="icon" href="/assets/logo_afaris.png" type="image/png" />
  <!-- Privacy-friendly analytics by Plausible -->
  <script async src="https://plausible.io/js/pa-AUNIvzG_5CUrpkovSU-75.js"></script>
  <script>
    window.plausible=window.plausible||function(){(plausible.q=plausible.q||[]).push(arguments)},plausible.init=plausible.init||function(i){plausible.o=i||{}};
    plausible.init();
  </script>
  <!-- Styles l√©gers du modal audio -->
  <style>
    .modal-backdrop{position:fixed;inset:0;background:rgba(0,0,0,.65);display:none;align-items:center;justify-content:center;z-index:9998}
    .modal{width:min(720px,94vw);background:#0f101b;border:1px solid #2b3042;border-radius:1rem;box-shadow:0 18px 50px rgba(0,0,0,.55);overflow:hidden}
    .modal-header{display:flex;justify-content:space-between;align-items:center;padding:.9rem 1rem;background:#151727;border-bottom:1px solid #2b3042}
    .modal-header h3{margin:0;font-size:1rem}
    .modal-body{padding:1rem 1.25rem}
    .audio-wrap{display:flex;align-items:center;gap:1rem;background:#0c0e18;border:1px solid #2a2f45;border-radius:.8rem;padding:1rem}
    .audio-meta{flex:1;min-width:0}
    .audio-title{font-weight:700;margin-bottom:.25rem}
    .audio-sub{color:#9aa3b5;font-size:.92rem}
    .time{font-variant-numeric:tabular-nums;color:#c7cfdb}
    .modal-actions{display:flex;justify-content:flex-end;gap:.6rem;padding:.8rem 1rem;background:#0f101b;border-top:1px solid #2b3042}
  </style>
</head>

<body>
  <header class="navbar">
    <div class="logo">
      <img src="/assets/logo_afaris.png" alt="AFARIS" />
      <span>AFARIS</span>
    </div>
    <nav>
      <a href="#tickets">Billets</a>
      <a href="#infos">Infos</a>
      <a href="/admin/login">Scanner</a>
      <a id="adminLink" class="btn small ghost" href="/admin/login">Connexion</a>
      <div id="google_translate_element" aria-label="S√©lecteur de langue"></div>
    </nav>
  </header>

  <main class="hero">
    <div class="hero-content">
      <h1><span class="highlight">Arido</span> en concert ‚Äì Organis√© par AFARIS</h1>
      <p>Une nuit √† ne pas manquer. Achetez vos billets maintenant et recevez un QR code unique par e-mail.</p>
      <div class="hero-buttons">
        <a href="#tickets" class="btn primary">Acheter mon billet</a>
        <button id="openTeaser" class="btn ghost" type="button">√âcouter le teaser</button>
      </div>
      <div class="tags">
        <span>Paiement PayPal (carte ou compte)</span>
        <span>QR code unique anti-fraude</span>
        <span>Scanner √† l‚Äôentr√©e</span>
      </div>
    </div>

    <div class="hero-image">
      <img src="/assets/artist_arido.png" alt="Arido"
           onerror="this.onerror=null; this.src='/assets/logo_afaris.png';" />
      <div class="event-info">
        <span>D√©cembre 2025</span>
        <span>Bruxelles</span>
        <span>Ouverture 19:00</span>
        <a href="#tickets" class="btn small primary">R√©server</a>
      </div>
    </div>
  </main>

  <section id="experience" class="experience-section">
    <div class="experience-content">
      <p class="eyebrow">Avant-go√ªt de la soir√©e</p>
      <h2>Plongez dans l‚Äôambiance Arido</h2>
      <p>Extraits exclusifs, √©nergie live et immersion totale : d√©couvrez le teaser avant de r√©server votre table.</p>
      <ul class="experience-points">
        <li>Extraits captur√©s lors des shows pr√©c√©dent d‚ÄôArido.</li>
        <li>Sonorisation identique √† celle du show 2025.</li>
        <li>Moments fort, ambiance dancefloor.</li>
      </ul>
      <div class="countdown" aria-label="Compte √† rebours avant la soir√©e AFARIS">
        <div>
          <span id="cd-days">--</span>
          <small>jours</small>
        </div>
        <div>
          <span id="cd-hours">--</span>
          <small>heures</small>
        </div>
        <div>
          <span id="cd-minutes">--</span>
          <small>minutes</small>
        </div>
        <div>
          <span id="cd-seconds">--</span>
          <small>secondes</small>
        </div>
      </div>
      <a href="#tickets" class="btn primary">Je r√©serve mon billet</a>
    </div>
    <div class="experience-video">
      <video src="/assets/teaser_highlight.mp4" controls muted loop playsinline poster="/assets/covervideo.png" aria-label="Teaser vid√©o AFARIS">
        Votre navigateur ne supporte pas la vid√©o HTML5. T√©l√©chargez le teaser <a href="/assets/teaser_highlight.mp4">en cliquant ici</a>.
      </video>
    </div>
  </section>

  <section id="tickets" class="tickets-section">
    <h2>Choisissez votre billet</h2>

    <div class="tickets-grid">
      <div class="ticket-card">
        <h3>Entr√©e Standard</h3>
        <p class="price">30‚Ç¨</p>
        <p>Acc√®s √† la soir√©e<br><small>Billet nominatif</small></p>
        <a href="/purchase.html?type=standard" class="btn ghost">Acheter</a>
      </div>

      <div class="ticket-card popular">
        <div class="badge">Le + populaire</div>
        <h3>Entr√©e VIP</h3>
        <p class="price">45‚Ç¨</p>
        <p>Table r√©serv√©e<br><small>Plat compris & service personnalis√©</small></p>
        <a href="/purchase.html?type=vip" class="btn primary">Acheter</a>
      </div>
    </div>
  </section>

  <section id="infos" class="infos-section">
    <h2>Infos pratiques</h2>
    <ul>
      <li><b>Date :</b> 27 D√©cembre 2025</li>
      <li><b>Heure :</b> 19:00 ‚Ä¢ Show √† 20:00</li>
      <li><b>Lieu :</b> Quai de l‚ÄôIndustrie 121, 1080 Molenbeek-Saint-Jean</li>
    </ul>
  </section>

  <footer>
    <div class="wrap foot">
      <span>¬© 2025 AFARIS ‚Äì Une g√©n√©ration qui construit</span>
      <div class="contact-whatsapp">
        <span>Contact WhatsApp :</span>
        <a href="https://wa.me/32493925577" target="_blank" rel="noopener noreferrer" aria-label="WhatsApp AFARIS">+32&nbsp;493&nbsp;92&nbsp;55&nbsp;77</a>
      </div>
      <div class="social-links" aria-label="R√©seaux sociaux AFARIS">
        <a href="https://www.facebook.com/profile.php?id=61582489296334" target="_blank" rel="noopener noreferrer" aria-label="Facebook AFARIS">
          <span class="sr-only">Facebook</span>
          <svg viewBox="0 0 24 24" aria-hidden="true">
            <path d="M22 12c0-5.52-4.48-10-10-10S2 6.48 2 12c0 4.99 3.66 9.12 8.44 9.88v-6.99H7.9v-2.89h2.54V9.41c0-2.5 1.49-3.89 3.77-3.89 1.09 0 2.23.2 2.23.2v2.46H15.2c-1.24 0-1.63.77-1.63 1.56v1.87h2.78l-.44 2.89h-2.34v6.99C18.34 21.12 22 16.99 22 12z"></path>
          </svg>
        </a>
        <a href="https://www.instagram.com/afaris.90/" target="_blank" rel="noopener noreferrer" aria-label="Instagram AFARIS">
          <span class="sr-only">Instagram</span>
          <svg viewBox="0 0 24 24" aria-hidden="true">
            <path d="M7 2C4.24 2 2 4.24 2 7v10c0 2.76 2.24 5 5 5h10c2.76 0 5-2.24 5-5V7c0-2.76-2.24-5-5-5H7zm10.5 2c1.38 0 2.5 1.12 2.5 2.5V18.5c0 1.38-1.12 2.5-2.5 2.5H6.5C5.12 21 4 19.88 4 18.5V6.5C4 5.12 5.12 4 6.5 4H17.5zm-5.5 3.5A4.5 4.5 0 1 0 12 19.5 4.5 4.5 0 0 0 12 7.5zm0 2A2.5 2.5 0 1 1 12 14.5 2.5 2.5 0 0 1 12 9.5zm5.25-3.75a1.25 1.25 0 1 0 1.25 1.25 1.25 1.25 0 0 0-1.25-1.25z"></path>
          </svg>
        </a>
        <a href="https://www.tiktok.com/@afarisbx" target="_blank" rel="noopener noreferrer" aria-label="TikTok AFARIS">
          <span class="sr-only">TikTok</span>
          <svg viewBox="0 0 24 24" aria-hidden="true">
            <path d="M21 8.56a5.24 5.24 0 0 1-4.04-1.99v6.18c0 4.13-3.35 7.48-7.48 7.48A7.48 7.48 0 0 1 2 12.75 7.5 7.5 0 0 1 7.25 6.5v3.2a3.32 3.32 0 0 0-2 3.03 3.33 3.33 0 0 0 3.33 3.33c1.84 0 3.33-1.49 3.33-3.33V2h3.44a5.25 5.25 0 0 0 4.72 4.87z"></path>
          </svg>
        </a>
      </div>
    </div>
  </footer>

  <!-- Modal audio -->
  <div id="teaserBackdrop" class="modal-backdrop" aria-hidden="true">
    <div class="modal" role="dialog" aria-modal="true" aria-labelledby="teaserTitle">
      <div class="modal-header">
        <h3 id="teaserTitle">Teaser audio ‚Äî Soir√©e AFARIS</h3>
        <button id="closeTeaser" class="btn small ghost" type="button">Fermer</button>
      </div>
      <div class="modal-body">
        <div class="audio-wrap">
          <button id="togglePlay" class="btn primary" type="button">‚ñ∂Ô∏é Lecture</button>
          <div class="audio-meta">
            <div class="audio-title">Arido ‚Äì Teaser mix 2025</div>
            <div class="audio-sub">
              <span id="cur" class="time">00:00</span> / <span id="dur" class="time">--:--</span>
            </div>
          </div>
          <audio id="audio" preload="metadata">
            <!-- IMPORTANT : chemin absolu vers public/assets/‚Ä¶ avec la bonne casse -->
            <source src="/assets/ARIDO_AFARIS_TEASER_MIX_2MIN.mp3?v=20251105" type="audio/mpeg" />
            Votre navigateur ne supporte pas l‚Äôaudio HTML5.
          </audio>
        </div>
      </div>
      <div class="modal-actions">
        <button id="rewind" class="btn ghost" type="button">‚ü≤ -10s</button>
        <button id="forward" class="btn ghost" type="button">+10s ‚ü≥</button>
        <button id="mute" class="btn ghost" type="button">üîà Muet</button>
      </div>
    </div>
  </div>


  <!-- Script Connexion ‚Üî D√©connexion (ignore 401) -->
  <script>
    (function(){
      const link=document.getElementById('adminLink');
      fetch('/admin/api/me',{credentials:'include'})
        .then(r=>r.ok?r.json():null)
        .then(d=>{ if(d && (d.ok||d.user||d.authenticated)){ link.textContent='D√©connexion (Admin)'; link.href='/admin/logout'; }})
        .catch(()=>{});
    })();
  </script>

  <!-- Script modal audio -->
  <script>
    (function(){
      const backdrop = document.getElementById('teaserBackdrop');
      const btnOpen  = document.getElementById('openTeaser');
      const btnClose = document.getElementById('closeTeaser');
      const btnToggle= document.getElementById('togglePlay');
      const btnFwd   = document.getElementById('forward');
      const btnRew   = document.getElementById('rewind');
      const btnMute  = document.getElementById('mute');
      const curEl    = document.getElementById('cur');
      const durEl    = document.getElementById('dur');
      const audio    = document.getElementById('audio');

      function fmt(t){ if(!isFinite(t)) return '--:--'; const m=Math.floor(t/60), s=Math.floor(t%60); return String(m).padStart(2,'0')+':'+String(s).padStart(2,'0'); }

      function openModal(){
        backdrop.style.display = 'flex';
        backdrop.setAttribute('aria-hidden','false');
        audio.play().catch(()=>{ /* autoplay peut √™tre bloqu√© */ });
        btnClose.focus();
        document.addEventListener('keydown', onEsc);
      }
      function closeModal(){
        backdrop.style.display = 'none';
        backdrop.setAttribute('aria-hidden','true');
        audio.pause();
        document.removeEventListener('keydown', onEsc);
      }
      function onEsc(e){ if(e.key === 'Escape') closeModal(); }

      // M√†J temps
      audio.addEventListener('loadedmetadata', ()=> durEl.textContent = fmt(audio.duration));
      audio.addEventListener('timeupdate', ()=> {
        curEl.textContent = fmt(audio.currentTime);
        btnToggle.textContent = audio.paused ? '‚ñ∂Ô∏é Lecture' : '‚è∏Ô∏é Pause';
      });

      // Boutons
      if (btnOpen)  btnOpen.addEventListener('click', openModal);
      btnClose.addEventListener('click', closeModal);
      backdrop.addEventListener('click', (e)=>{
        const dialog = e.target.closest('.modal');
        if (!dialog) closeModal();
      });
      btnToggle.addEventListener('click', ()=> audio.paused ? audio.play() : audio.pause());
      btnFwd.addEventListener('click', ()=> audio.currentTime = Math.min((audio.currentTime||0)+10, audio.duration||audio.currentTime+10));
      btnRew.addEventListener('click', ()=> audio.currentTime = Math.max((audio.currentTime||0)-10, 0));
      btnMute.addEventListener('click', ()=> { audio.muted = !audio.muted; btnMute.textContent = audio.muted ? 'üîá Non muet' : 'üîà Muet'; });
    })();
  </script>

  <!-- Compte √† rebours -->
  <script>
    (function(){
      const target = new Date('2025-12-27T19:00:00+01:00').getTime();
      const els = {
        days: document.getElementById('cd-days'),
        hours: document.getElementById('cd-hours'),
        minutes: document.getElementById('cd-minutes'),
        seconds: document.getElementById('cd-seconds'),
      };
      function pad(v){ return String(v).padStart(2,'0'); }
      function tick(){
        const now = Date.now();
        let diff = Math.max(target - now, 0);
        const days = Math.floor(diff / (1000 * 60 * 60 * 24));
        diff -= days * 1000 * 60 * 60 * 24;
        const hours = Math.floor(diff / (1000 * 60 * 60));
        diff -= hours * 1000 * 60 * 60;
        const minutes = Math.floor(diff / (1000 * 60));
        diff -= minutes * 1000 * 60;
        const seconds = Math.floor(diff / 1000);
        els.days.textContent = pad(days);
        els.hours.textContent = pad(hours);
        els.minutes.textContent = pad(minutes);
        els.seconds.textContent = pad(seconds);
      }
      tick();
      setInterval(tick, 1000);
    })();
  </script>

  <!-- Google Translate -->
  <script>
    function googleTranslateElementInit() {
      new google.translate.TranslateElement({
        pageLanguage: 'fr',
        includedLanguages: 'fr,en,nl,ar,so,aa',
        layout: google.translate.TranslateElement.InlineLayout.SIMPLE,
        autoDisplay: false
      }, 'google_translate_element');
    }
  </script>
  <script src="//translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script>

</body>
</html>
